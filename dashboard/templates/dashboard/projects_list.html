{% extends 'dashboard/base.html' %}
{% block title %}Projects | KPO Dashboard{% endblock %}
{% block content %}
<h1>Projects</h1>
<a href="?export=csv" style="float:right; margin-bottom:10px;">Export to CSV</a>
<form method="get" style="margin-bottom: 18px;">
    <input type="text" name="q" value="{{ query }}" placeholder="Search Projects by name..." style="padding: 6px 12px; border-radius: 6px; border: 1px solid #ccc;">
    <button type="submit">Search</button>
</form>
<table>
    <tr><th>Name</th><th>Client</th><th>Status</th><th>Start Date</th><th>End Date</th></tr>
    {% for project in projects %}
    <tr>
        <td><a href="/projects/{{ project.id }}/">{{ project.name }}</a></td>
        <td>{{ project.client }}</td>
        <td>{{ project.status }}</td>
        <td>{{ project.start_date }}</td>
        <td>{{ project.end_date|default:'-' }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="5">No projects found.</td></tr>
    {% endfor %}
</table>
<h2>Add Project</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Project</button>
</form>
{% endblock %}
